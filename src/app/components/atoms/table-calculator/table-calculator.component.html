<div class="container">
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div formArrayName="quantities">
      <div class="flex">
        <h2>Aggiungi quantit√†</h2>
        <button type="button" (click)="addQuantity()" class="add">
          &plus;
        </button>
      </div>
      <div
        *ngFor="let quantity of quantities().controls; let i = index"
        [formGroupName]="i"
        class="flex"
      >
        <input
          type="number"
          (input)="onInput($event)"
          formControlName="qty"
          class="form-control input-control"
          placeholder="Grammi"
        />
        <input
          type="number"
          formControlName="carbs"
          class="form-control input-control"
          placeholder="Carboidrati (per 100g)"
        />
        <!-- <input
          type="number"
          formControlName="total_carbs"
          class="form-control input-control"
          placeholder="Totale Carboidrati"
        /> -->
        <button type="button" (click)="removeQuantity(i)" class="delete">
          &times;
        </button>
      </div>
    </div>
    <!-- <button type="submit" class="btn btn-success">Submit</button> -->
  </form>

  <br />
  <div>
    <span>Carboidrati totali:</span>
    {{ this.getTotalCarbs() }}
  </div>
  <div>
    <span>Insulina necessaria:</span>
    {{ this.getInsulinValue() }}
  </div>
</div>
