<div class="container">
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div formArrayName="quantities">
      <button type="button" (click)="addQuantity()" class="btn btn-primary">
        Aggiungi
      </button>
      <div
        *ngFor="let quantity of quantities().controls; let i = index"
        [formGroupName]="i"
        class="flex"
      >
        <input
          type="number"
          (input)="onInput($event)"
          formControlName="qty"
          class="form-control"
          placeholder="Grammi"
        />
        <input
          type="number"
          formControlName="carbs"
          class="form-control"
          placeholder="Carboidrati (per 100g)"
        />
        <input
          type="number"
          formControlName="total_carbs"
          class="form-control"
          placeholder="Totale Carboidrati"
        />

        <button (click)="removeQuantity(i)" class="btn btn-danger">
          Rimuovi
        </button>
      </div>
    </div>

    <button type="submit" class="btn btn-success">Submit</button>
  </form>

  <br />
  {{ this.productForm.value | json }}
</div>
